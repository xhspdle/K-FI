<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.kfi.mybatis.dgl.MembersMapper">
	
<!-- 	 <insert id="insert" parameterType="logmembers">
		insert into members values
		(#{userNum}, #{userId},#{userNickname}, #{userPwd}, #{userEmail}, #{userRegdate},0,0)
	</insert> -->
	<update id="update" parameterType="logmembers">
		update members set USER_NICKNAME=#{userNickname}, USER_PWD=#{userPwd}, USER_EMAIL=#{userEmail}
	</update>
	
	<delete id="delete" parameterType="int">
		delete from members where USER_NUM=#{value}
	</delete>
	
	<select id="select" parameterType="int" resultType="logmembers">
		select * from members where USER_NUM=#{value}
	</select>
	<!--
	 <select id="login" resultType="com.kfi.dgl.members.vo.MembersVo">
		<![CDATA[select USER_NUM, USER_ID, USER_NICKNAME, USER_EMAIL, USER_STATUS from members where USER_ID = #{userId}]]>
	</select> 
	-->
	
	<!-- <insert id="createKey">
		insert into CERTI_MEMBERS values(#{})
	</insert> -->
	<!--  
	사용자 인증상태 0->1 변경
	<update id=""> 
	 	<![CDATA[update members set USER_CERTI = 1 where (select count(*) from members where USER_EMAIL = #{userEmail}) > 0]]>
	 </update> -->
	 
	<!-- 로그인 -->
	<select id="login" resultType="logmembers" parameterType="hashmap" >
		select * from members where USER_ID = #{userId} and  USER_PWD=#{userPwd}
	</select>
	
	<!-- 마지막유저번호 -->
	<select id="getMaxNum" resultType="int">
		select NVL(max(user_num),0) maxnum from members
	</select>
	
	<!-- 유저번호 -->
	<select id="getCount" parameterType="hashmap" resultType="int">
		select NVL(count(user_num),0) cnt from members
		<include refid="search"/>
	</select>
</mapper>